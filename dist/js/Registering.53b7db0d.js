"use strict";(self["webpackChunkSMGS"]=self["webpackChunkSMGS"]||[]).push([[745],{254:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{class:"allView"==t.styleData.qf_homeStyle?"everyDayRate login-wrap":"everyDayRate-lr login-wrap-lr",style:{backgroundImage:"allView"==t.styleData.qf_homeStyle?`url(${0==t.imgObj.flag?t.Imgs[t.Imgs.length-1]:t.Imgs[t.aroundNum]})`:"none",width:100-t.changeWidth+"%"},on:{click:function(e){return e.stopPropagation(),t.hiddenRight.apply(null,arguments)}}},[e("div",{class:"allView"==t.styleData.qf_homeStyle?t.styleData.qf_login:"right-lr",attrs:{id:"mobile_form"}},[e("div",{class:"allView"==t.styleData.qf_homeStyle?"left-box":"left-box-lr"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"leftAndright"==t.styleData.qf_homeStyle,expression:"styleData.qf_homeStyle == 'leftAndright'"}],attrs:{id:"swiper-out-box"}},[e("el-carousel",{attrs:{direction:t.styleData.qf_swiper_way,autoplay:t.styleData.qf_loopvalue,loop:!0,arrow:"never",interval:3500,"indicator-position":t.styleData.qf_swiper_pages}},t._l(t.Imgs,(function(t,a){return e("el-carousel-item",{key:a},[e("img",{staticClass:"swipermy-imgs",attrs:{src:t,alt:"图片"}})])})),1)],1)]),e("div",{class:"allView"==t.styleData.qf_homeStyle?"right-box":"right-box-lr"},[e("div",{staticClass:"inner-box"},[e("LoginNew",{attrs:{allObj:t.allData,styleData:t.styleData,logo_path:t.logo_path,sendData:{formData:t.formData,qrCode:t.qrCode}}})],1)]),e("div",{staticClass:"setting-right"},[e("SettingTools",{ref:"child",on:{openBox:t.openB,closeBox:t.closeB,pullData:t.getAllData,loginwaycheck:t.getway,footArea:t.getTopData,sendImgs:t.getImgs,allright:t.getBlu,theNewImg:t.getNewImg,logo:t.getlogo,pubkey:t.getpubkey,icon:t.geticon}})],1)]),1==t.styleData.login_footer&&"allView"===t.styleData.qf_homeStyle?e("div",{staticClass:"footer-bottom"},[e("div",{staticClass:"footer-bottom-center"},[e("div",{staticClass:"move-box"},[e("div",{staticClass:"top-area",class:"footer-bottom-center-up"==t.styleData.qf_footer&&0==t.allRight?t.styleData.qf_footer:"top-area"},t._l(t.footDatas.topArea,(function(a,s){return e("div",{key:s,staticClass:"footer-item"},[e("a",{attrs:{href:a.href}},[a.img?e("img",{attrs:{src:a.img,alt:"",width:"20px",height:"20px"}}):t._e(),e("img",{attrs:{onerror:"this.style.display='none'",src:"#",alt:""}}),e("p",{staticStyle:{float:"right",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#fff"}},[t._v(" "+t._s(a.text)+" ")])])])})),0),e("div",{staticClass:"under-area",class:"footer-bottom-center-down"==t.styleData.qf_footer&&0==t.allRight?t.styleData.qf_footer:"under-area"},t._l(t.footDatas.underArea,(function(a,s){return e("div",{key:s,staticClass:"footer-item"},[e("a",{attrs:{href:a.href}},[a.img?e("img",{attrs:{src:a.img,alt:"",width:"20px",height:"20px"}}):t._e(),e("img",{attrs:{onerror:"this.style.display='none'",src:"#",alt:""}}),e("p",{staticStyle:{float:"right",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#fff"}},[t._v(" "+t._s(a.text)+" ")])])])})),0)])])]):t._e()])])},o=[],i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-box"},[t._m(0),e("transition",{attrs:{name:"slide-fade"}},[t.isShow?[e("div",{staticStyle:{display:"flex","justify-content":"center","flex-direction":"column","align-items":"center"}},[e("div",[e("img",{attrs:{src:t.sendData.qrCode,alt:"",width:"240"}})]),e("div",[e("p",{staticClass:"tips"},[t._v(" Please use "),e("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en&pli=1",target:"_blank"}},[t._v("Google Authenticator App")]),t._v(" or "),e("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.azure.authenticator&hl=en_US",target:"_blank"}},[t._v(" Microsoft Authenticator App")]),t._v("Scan QR code ")])]),e("div",{staticClass:"stepbtn"},[e("el-button",{staticClass:"registeringbtn",attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("Next")])],1)])]:[e("div",[e("el-form",{ref:"ruleFormCode",attrs:{rules:t.rulesCode,model:t.CodeFormData}},[e("div",{staticStyle:{"margin-bottom":"-20px"}},[e("span",{staticStyle:{"font-weight":"600","font-size":"16px"}},[t._v("2FA Code")])]),e("el-form-item",{staticClass:"form-items",staticStyle:{"margin-top":"40px"},attrs:{prop:"code"}},[e("el-input",{attrs:{placeholder:t.$t("message.spCodemsg"),clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitCode("ruleFormCode")}},model:{value:t.CodeFormData.code,callback:function(e){t.$set(t.CodeFormData,"code",e)},expression:"CodeFormData.code"}})],1),e("div",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[e("span",{staticStyle:{color:"grey","line-height":"24px"}},[t._v(t._s(t.$t("message.codeDes")))])]),e("el-form-item",{staticClass:"form-items"},[e("div",{staticClass:"box-form-out"},[e("div",{staticClass:"box-form-out-in-box"},[e("div",{staticClass:"box-form-out-inner"},[e("el-button",{staticClass:"spbtn backbtn",on:{click:t.backQrCode}},[t._v("Back")]),e("el-button",{staticClass:"spbtn registeringbtn",attrs:{type:"primary"},on:{click:function(e){return t.submitCode("ruleFormCode")}}},[e("span",[t._v(t._s(t.$t("message.ok")))])])],1)])])])],1)],1)]],2)],1)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-box-top-area"},[e("div",{staticClass:"login-title"},[e("span",[t._v("Scholarship Management Gateway System")])]),e("div",{staticClass:"login-top-text"},[e("span",[t._v("Registering")])])])}],l=(a(7658),a(8762),a(8028)),n={filters:{capitalize:function(t){return t+this.$t("message.login")}},props:{allObj:Object,logo_path:String,styleData:Object,userIds:Number,sendData:Object},components:{},data(){return{isShow:!0,timer:null,timer2:null,timer3:null,ruleFormData:{username:"",password:""},EMAIL_REGEX:/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,MOBILENUM_REGEX:/^\d{4,11}$/,EMAILS:"",userid:"",loading:!0,QRCodeUrl:"",CodeFormData:{code:""},userIdsq:"",exToken:"",resultUri:""}},computed:{rules(){return{username:[{pattern:/^\d{4,11}$/,message:this.$t("message.msgIphone"),trigger:"blur"}],userEmail:[{pattern:/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,message:this.$t("message.msgEmail"),trigger:"blur"}],otheruser:[{required:!0,message:this.$t("message.msgOther"),trigger:"blur"}],password:[{required:!0,message:this.$t("message.msgpassword"),trigger:"blur"}]}},rulesCode(){return{code:[{pattern:/^\d{6}$/,message:this.$t("message.spCodemsg"),trigger:"blur"}]}}},methods:{nextPage(){this.isShow=!1},resetForm(t){this.$refs[t].resetFields()},submitFormToken(t){this.$refs[t].validate((t=>{t&&(this.allObj.userData.useQingFlowVersion<=4.5?this.loginBefore():this.loginAfter())}))},async submitCode(t){this.$refs[t].validate((async t=>{if(t){const{code:t}=this.CodeFormData,e={userId:this.sendData.formData.nric,checkCode:t};console.log(e),await this.checkAuthentication(e)}}))},async checkAuthentication(t){await(0,l.Oj)(JSON.stringify(t)).then((async t=>{const{code:e}=t.data;0===e&&(this.$notify.success({title:"success",message:"2FA verification succeeded",duration:0,position:"bottom-left",showClose:!0}),await this.submitForms())}),(t=>{const{code:e,message:a}=t.response.data;this.$notify.error({title:"error",message:`Message:${a};errorCode:${e}`,duration:0,position:"bottom-left",showClose:!0})}))},async submitForms(){await(0,l.ch)(JSON.stringify({...this.sendData.formData,checkCode:this.CodeFormData.code})).then((async t=>{const{code:e}=t.data;0===e&&(await sessionStorage.clear(),this.$router.push("/registrationsuccess"))}),(t=>{const{code:e,message:a}=t.response.data;40103===e?this.$notify.error({title:"error",dangerouslyUseHTMLString:!0,message:` <div style="padding: 10px 6px;">\n                                                <div><strong>Message:</strong> The phone number is already registered</div>\n                                                <div><strong>errorCode:</strong> ${e}</div>\n                                               </div>`,duration:0,position:"bottom-left",showClose:!0}):this.$notify.error({title:"error",message:`Message:${a};errorCode:${e}`,duration:0,position:"bottom-left",showClose:!0})}))},backQrCode(){this.isShow=!0}}},g=n,c=a(3736),d=(0,c.Z)(g,i,r,!1,null,"d5cac03a",null),h=d.exports,m=a(8595),p=a(1833),u={name:"LoginPage",filters:{capitalize:function(t){return t+"Login"}},props:{msg:String},data(){return{styleData:{},logo_path:"",footerData:[],open:!1,param:{username:"",password:""},form:{settingData:""},title:"",pubKey:"",EMAIL_REGEX:/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,MOBILENUM_REGEX:/^\d{4,11}$/,changeWidth:0,loginWays:[],footDatas:{},allRight:!1,Imgs:[],imgObj:{},allData:{},icon_path:"",ipAddress:"",formData:{},qrCode:""}},created(){},beforeUpdate(){this.setIcon()},computed:{aroundNum:function(){return Math.floor(Math.random()*this.Imgs.length)}},methods:{hiddenRight(){this.$refs.child.closeRight()},closeB:function(t){this.changeWidth=t},openB:function(t){this.changeWidth=t},getpubkey(t){this.pubKey=t},getNewImg(t){this.imgObj=t},getImgs(t){this.Imgs=t},getway(t){this.loginWays=t},getTopData(t){this.footDatas=t},getBlu(t){this.allRight=t},getAllData(t){this.styleData=t.styleData,this.footerData=t.footerData,this.loginWays=t.loginWays,this.footDatas=t.footData,this.allData=t},getlogo(t){this.logo_path=t},geticon(t){console.log(t),this.icon_path=t},setIcon(){document.querySelector("link").href=this.icon_path}},async mounted(){let t=await sessionStorage.getItem("params");console.log(t,"session");const{formData:e,qrCode:a}=JSON.parse(t);this.formData=e,this.qrCode=a},components:{LoginNew:h,SettingTools:m.Z,HeadTop:p.Z}},f=u,y=(0,c.Z)(f,s,o,!1,null,"0ef274ee",null),_=y.exports}}]);
//# sourceMappingURL=Registering.53b7db0d.js.map