(self["webpackChunkSMGS"]=self["webpackChunkSMGS"]||[]).push([[745],{254:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return _}});var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{class:"allView"==t.styleData.qf_homeStyle?"everyDayRate login-wrap":"everyDayRate-lr login-wrap-lr",style:{backgroundImage:"allView"==t.styleData.qf_homeStyle?"url(".concat(0==t.imgObj.flag?t.Imgs[t.Imgs.length-1]:t.Imgs[t.aroundNum],")"):"none",width:"".concat(100-t.changeWidth,"%")},on:{click:function(e){return e.stopPropagation(),t.hiddenRight.apply(null,arguments)}}},[e("div",{class:"allView"==t.styleData.qf_homeStyle?t.styleData.qf_login:"right-lr",attrs:{id:"mobile_form"}},[e("div",{class:"allView"==t.styleData.qf_homeStyle?"left-box":"left-box-lr"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"leftAndright"==t.styleData.qf_homeStyle,expression:"styleData.qf_homeStyle == 'leftAndright'"}],attrs:{id:"swiper-out-box"}},[e("el-carousel",{attrs:{direction:t.styleData.qf_swiper_way,autoplay:t.styleData.qf_loopvalue,loop:!0,arrow:"never",interval:3500,"indicator-position":t.styleData.qf_swiper_pages}},t._l(t.Imgs,(function(t,a){return e("el-carousel-item",{key:a},[e("img",{staticClass:"swipermy-imgs",attrs:{src:t,alt:"图片"}})])})),1)],1)]),e("div",{class:"allView"==t.styleData.qf_homeStyle?"right-box":"right-box-lr"},[e("div",{staticClass:"inner-box"},[e("LoginNew",{attrs:{allObj:t.allData,styleData:t.styleData,logo_path:t.logo_path,sendData:{formData:t.formData,qrCode:t.qrCode}}})],1)]),e("div",{staticClass:"setting-right"},[e("SettingTools",{ref:"child",on:{openBox:t.openB,closeBox:t.closeB,pullData:t.getAllData,loginwaycheck:t.getway,footArea:t.getTopData,sendImgs:t.getImgs,allright:t.getBlu,theNewImg:t.getNewImg,logo:t.getlogo,pubkey:t.getpubkey,icon:t.geticon}})],1)]),1==t.styleData.login_footer&&"allView"===t.styleData.qf_homeStyle?e("div",{staticClass:"footer-bottom"},[e("div",{staticClass:"footer-bottom-center"},[e("div",{staticClass:"move-box"},[e("div",{staticClass:"top-area",class:"footer-bottom-center-up"==t.styleData.qf_footer&&0==t.allRight?t.styleData.qf_footer:"top-area"},t._l(t.footDatas.topArea,(function(a,o){return e("div",{key:o,staticClass:"footer-item"},[e("a",{attrs:{href:a.href}},[a.img?e("img",{attrs:{src:a.img,alt:"",width:"20px",height:"20px"}}):t._e(),e("img",{attrs:{onerror:"this.style.display='none'",src:"#",alt:""}}),e("p",{staticStyle:{float:"right",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#fff"}},[t._v(" "+t._s(a.text)+" ")])])])})),0),e("div",{staticClass:"under-area",class:"footer-bottom-center-down"==t.styleData.qf_footer&&0==t.allRight?t.styleData.qf_footer:"under-area"},t._l(t.footDatas.underArea,(function(a,o){return e("div",{key:o,staticClass:"footer-item"},[e("a",{attrs:{href:a.href}},[a.img?e("img",{attrs:{src:a.img,alt:"",width:"20px",height:"20px"}}):t._e(),e("img",{attrs:{onerror:"this.style.display='none'",src:"#",alt:""}}),e("p",{staticStyle:{float:"right",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#fff"}},[t._v(" "+t._s(a.text)+" ")])])])})),0)])])]):t._e()])])},r=[],s=a(51907),n=a(85617),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-box"},[t._m(0),e("transition",{attrs:{name:"slide-fade"}},[t.isShow?[e("div",{staticStyle:{display:"flex","justify-content":"center","flex-direction":"column","align-items":"center"}},[e("div",[e("img",{attrs:{src:t.sendData.qrCode,alt:"",width:"240"}})]),e("div",[e("p",{staticClass:"tips"},[t._v(" Please use "),e("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en&pli=1",target:"_blank"}},[t._v("Google Authenticator App")]),t._v(" or "),e("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.azure.authenticator&hl=en_US",target:"_blank"}},[t._v(" Microsoft Authenticator App")]),t._v("Scan QR code ")])]),e("div",{staticClass:"stepbtn"},[e("el-button",{staticClass:"registeringbtn",attrs:{type:"primary"},on:{click:t.nextPage}},[t._v("Next")])],1)])]:[e("div",[e("el-form",{ref:"ruleFormCode",attrs:{rules:t.rulesCode,model:t.CodeFormData}},[e("div",{staticStyle:{"margin-bottom":"-20px"}},[e("span",{staticStyle:{"font-weight":"600","font-size":"16px"}},[t._v("2FA Code")])]),e("el-form-item",{staticClass:"form-items",staticStyle:{"margin-top":"40px"},attrs:{prop:"code"}},[e("el-input",{attrs:{placeholder:t.$t("message.spCodemsg"),clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitCode("ruleFormCode")}},model:{value:t.CodeFormData.code,callback:function(e){t.$set(t.CodeFormData,"code",e)},expression:"CodeFormData.code"}})],1),e("div",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[e("span",{staticStyle:{color:"grey","line-height":"24px"}},[t._v(t._s(t.$t("message.codeDes")))])]),e("el-form-item",{staticClass:"form-items"},[e("div",{staticClass:"box-form-out"},[e("div",{staticClass:"box-form-out-in-box"},[e("div",{staticClass:"box-form-out-inner"},[e("el-button",{staticClass:"spbtn backbtn",on:{click:t.backQrCode}},[t._v("Back")]),e("el-button",{staticClass:"spbtn registeringbtn",attrs:{type:"primary"},on:{click:function(e){return t.submitCode("ruleFormCode")}}},[e("span",[t._v(t._s(t.$t("message.ok")))])])],1)])])])],1)],1)]],2)],1)},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-box-top-area"},[e("div",{staticClass:"login-title"},[e("span",[t._v("Scholarship Management Gateway System")])]),e("div",{staticClass:"login-top-text"},[e("span",[t._v("Registering")])])])}],c=a(56384),u=(a(9653),a(38862),a(92222),a(57658),a(28762),a(68028)),g={filters:{capitalize:function(t){return t+this.$t("message.login")}},props:{allObj:Object,logo_path:String,styleData:Object,userIds:Number,sendData:Object},components:{},data:function(){return{isShow:!0,timer:null,timer2:null,timer3:null,ruleFormData:{username:"",password:""},EMAIL_REGEX:/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,MOBILENUM_REGEX:/^\d{4,11}$/,EMAILS:"",userid:"",loading:!0,QRCodeUrl:"",CodeFormData:{code:""},userIdsq:"",exToken:"",resultUri:""}},computed:{rules:function(){return{username:[{pattern:/^\d{4,11}$/,message:this.$t("message.msgIphone"),trigger:"blur"}],userEmail:[{pattern:/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,message:this.$t("message.msgEmail"),trigger:"blur"}],otheruser:[{required:!0,message:this.$t("message.msgOther"),trigger:"blur"}],password:[{required:!0,message:this.$t("message.msgpassword"),trigger:"blur"}]}},rulesCode:function(){return{code:[{pattern:/^\d{6}$/,message:this.$t("message.spCodemsg"),trigger:"blur"}]}}},methods:{nextPage:function(){this.isShow=!1},resetForm:function(t){this.$refs[t].resetFields()},submitFormToken:function(t){var e=this;this.$refs[t].validate((function(t){t&&(e.allObj.userData.useQingFlowVersion<=4.5?e.loginBefore():e.loginAfter())}))},submitCode:function(t){var e=this;return(0,n.Z)((0,s.Z)().mark((function a(){return(0,s.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$refs[t].validate(function(){var t=(0,n.Z)((0,s.Z)().mark((function t(a){var o,r;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return o=e.CodeFormData.code,r={userId:e.sendData.formData.nric,checkCode:o},console.log(r),t.next=6,e.checkAuthentication(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()},checkAuthentication:function(t){var e=this;return(0,n.Z)((0,s.Z)().mark((function a(){return(0,s.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,u.Oj)(JSON.stringify(t)).then(function(){var t=(0,n.Z)((0,s.Z)().mark((function t(a){var o;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=a.data.code,0!==o){t.next=5;break}return e.$notify.success({title:"success",message:"2FA verification succeeded",duration:0,position:"bottom-left",showClose:!0}),t.next=5,e.submitForms();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){var a=t.response.data,o=a.code,r=a.message;e.$notify.error({title:"error",message:"Message:".concat(r,";errorCode:").concat(o),duration:0,position:"bottom-left",showClose:!0})}));case 2:case"end":return a.stop()}}),a)})))()},submitForms:function(){var t=this;return(0,n.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,u.ch)(JSON.stringify((0,c.Z)((0,c.Z)({},t.sendData.formData),{},{checkCode:t.CodeFormData.code}))).then(function(){var e=(0,n.Z)((0,s.Z)().mark((function e(a){var o;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=a.data.code,0!==o){e.next=5;break}return e.next=4,sessionStorage.clear();case 4:t.$router.push("/registrationsuccess");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var a=e.response.data,o=a.code,r=a.message;40103===o?t.$notify.error({title:"error",dangerouslyUseHTMLString:!0,message:' <div style="padding: 10px 6px;">\n                                                <div><strong>Message:</strong> The phone number is already registered</div>\n                                                <div><strong>errorCode:</strong> '.concat(o,"</div>\n                                               </div>"),duration:0,position:"bottom-left",showClose:!0}):t.$notify.error({title:"error",message:"Message:".concat(r,";errorCode:").concat(o),duration:0,position:"bottom-left",showClose:!0})}));case 2:case"end":return e.stop()}}),e)})))()},backQrCode:function(){this.isShow=!0}}},f=g,p=a(43736),d=(0,p.Z)(f,i,l,!1,null,"d5cac03a",null),h=d.exports,m=a(58595),y=a(81833),v={name:"LoginPage",filters:{capitalize:function(t){return t+"Login"}},props:{msg:String},data:function(){return{styleData:{},logo_path:"",footerData:[],open:!1,param:{username:"",password:""},form:{settingData:""},title:"",pubKey:"",EMAIL_REGEX:/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,MOBILENUM_REGEX:/^\d{4,11}$/,changeWidth:0,loginWays:[],footDatas:{},allRight:!1,Imgs:[],imgObj:{},allData:{},icon_path:"",ipAddress:"",formData:{},qrCode:""}},created:function(){},beforeUpdate:function(){this.setIcon()},computed:{aroundNum:function(){return Math.floor(Math.random()*this.Imgs.length)}},methods:{hiddenRight:function(){this.$refs.child.closeRight()},closeB:function(t){this.changeWidth=t},openB:function(t){this.changeWidth=t},getpubkey:function(t){this.pubKey=t},getNewImg:function(t){this.imgObj=t},getImgs:function(t){this.Imgs=t},getway:function(t){this.loginWays=t},getTopData:function(t){this.footDatas=t},getBlu:function(t){this.allRight=t},getAllData:function(t){this.styleData=t.styleData,this.footerData=t.footerData,this.loginWays=t.loginWays,this.footDatas=t.footData,this.allData=t},getlogo:function(t){this.logo_path=t},geticon:function(t){console.log(t),this.icon_path=t},setIcon:function(){document.querySelector("link").href=this.icon_path}},mounted:function(){var t=this;return(0,n.Z)((0,s.Z)().mark((function e(){var a,o,r,n;return(0,s.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,sessionStorage.getItem("params");case 2:a=e.sent,console.log(a,"session"),o=JSON.parse(a),r=o.formData,n=o.qrCode,t.formData=r,t.qrCode=n;case 7:case"end":return e.stop()}}),e)})))()},components:{LoginNew:h,SettingTools:m.Z,HeadTop:y.Z}},b=v,w=(0,p.Z)(b,o,r,!1,null,"0ef274ee",null),_=w.exports},49337:function(t,e,a){var o=a(82109),r=a(19781),s=a(53887),n=a(45656),i=a(31236),l=a(86135);o({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,a,o=n(t),r=i.f,c=s(o),u={},g=0;while(c.length>g)a=r(o,e=c[g++]),void 0!==a&&l(u,e,a);return u}})},56384:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});a(47941),a(82526),a(57327),a(41539),a(38880),a(57658),a(54747),a(49337);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}}}]);
//# sourceMappingURL=Registering-legacy.ba857d7d.js.map